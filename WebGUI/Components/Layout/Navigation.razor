@using MudBlazor
@inject NavigationManager NavigationManager

<MudAppBar Elevation="4" Fixed="true" Dense="true">
    <MudToolBar>
        <!-- Menu button for drawer -->
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="DrawerToggle" />
        
        <!-- App title/logo -->
        <MudText Typo="Typo.h6" Class="ml-2">My Application</MudText>
    </MudToolBar>
    <MudSpacer/>
    <!-- User menu -->
    <MudMenu Icon="@Icons.Material.Filled.AccountCircle" Label="Account" Color="Color.Inherit" 
             AnchorOrigin="Origin.BottomRight" TransformOrigin="Origin.TopRight">
        <AuthorizeView>
            <Authorized>
                <MudMenuItem OnClick='() => NavigateTo("/profile")'>Profile</MudMenuItem>
                <MudMenuItem OnClick='() => NavigateTo("/settings")'>Settings</MudMenuItem>
                <MudDivider />
                <MudMenuItem OnClick='() => NavigateTo("/logout")'>Logout</MudMenuItem>
            </Authorized>
            <NotAuthorized>
                <MudMenuItem OnClick='() => NavigateTo("/login")'>Login</MudMenuItem>
            </NotAuthorized>
        </AuthorizeView>
    </MudMenu>
</MudAppBar>

<MudDrawer @bind-Open="_drawerOpen" ClipMode="DrawerClipMode.Always" Elevation="2">
    <!-- Your navigation content here -->
    <NavMenu />
</MudDrawer>

@code {
    private bool _drawerOpen = false;

    private void DrawerToggle()
    {
        _drawerOpen = !_drawerOpen;
    }

    private void NavigateTo(string route)
    {
        NavigationManager.NavigateTo(route);
    }
    
}